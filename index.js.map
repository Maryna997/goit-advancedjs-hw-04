{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '50594223-08a3a2e6b4d3e84c5c31a5d02',\n        q: query,\n        page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","export function renderGalleryItem(items) {\n    return items\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) =>\n            `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    data-source=\"${largeImageURL}\"\n                    alt=\"${tags}\"\n                    width=360\n                    height=200\n                />\n\n            </a>\n            <ul class='metadata'>\n                <li>\n                    <p class='metadata-heading'>Likes</p>\n                    <p>${likes}</p>\n                </li>\n                <li>\n                    <p class='metadata-heading'>Views</p>\n                    <p>${views}</p>\n                </li>\n                <li>\n                    <p class='metadata-heading'>Comments</p>\n                    <p>${comments}</p>\n                </li>\n                <li>\n                    <p class='metadata-heading'>Downloads</p>\n                    <p>${downloads}</p>\n                </li>\n            </ul>\n        </li>`\n      )\n      .join('');\n  }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderGalleryItem } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightBoxInstance = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet query = '';\n\nconst onFormSubmit = async e => {\n    try {\n        e.preventDefault();\n        const form = e.currentTarget;\n        query = input.value.trim();\n        input.value = '';\n\n        if (query === '') {\n            iziToast.warning({\n            title: 'Caution',\n            message: 'Please enter a query!',\n            position: 'topRight',\n            });\n        \n            return;\n        }\n        \n        loader.classList.remove('hidden');\n\n        gallery.innerHTML = '';\n\n        loadMoreBtn.classList.add('hidden');\n\n        page = 1;\n\n        const data = await fetchImages(query, page);\n        loader.classList.add('hidden');\n\n        if (!data.hits.length) {\n            gallery.innerHTML = '';\n\n            return iziToast.show({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n                position: 'topRight',\n            });\n        }\n\n        gallery.innerHTML = renderGalleryItem(data.hits);\n        lightBoxInstance.refresh();\n\n        if (data.hits.length < data.totalHits) {\n            loadMoreBtn.classList.remove('hidden');\n            loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n        } else {\n            loadMoreBtn.classList.add('hidden');\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n            form.reset();\n        }\n}\n\nconst onLoadMoreBtnClick = async ev => { \n    try {\n        loader.classList.remove('hidden');\n        page++;\n        const data = await fetchImages(query, page);\n\n        if (!data.hits.length) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n\n            loadMoreBtn.classList.add('hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n\n            return;\n        }\n\n        gallery.insertAdjacentHTML('beforeend', renderGalleryItem(data.hits));\n        lightBoxInstance.refresh();\n        smoothScroll();\n        loader.classList.add('hidden');\n\n        if (page * 15 >= data.totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n            \n            loadMoreBtn.classList.add('hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n        }\n    } catch (error) {\n        console.log(error);\n    }\n};\n\nfunction smoothScroll() {\n    const item = document.querySelector('.gallery-item');\n  \n    if (item) {\n      const { height } = item.getBoundingClientRect();\n  \n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  }\n\nform.addEventListener(\"submit\", onFormSubmit);"],"names":["fetchImages","query","page","axios","error","renderGalleryItem","items","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","input","loader","loadMoreBtn","lightBoxInstance","SimpleLightbox","onFormSubmit","e","iziToast","data","onLoadMoreBtnClick","ev","smoothScroll","item","height"],"mappings":"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"}